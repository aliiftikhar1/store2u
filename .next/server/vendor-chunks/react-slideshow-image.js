"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/react-slideshow-image";
exports.ids = ["vendor-chunks/react-slideshow-image"];
exports.modules = {

/***/ "(ssr)/./node_modules/react-slideshow-image/dist/react-slideshow-image.esm.js":
/*!******************************************************************************!*\
  !*** ./node_modules/react-slideshow-image/dist/react-slideshow-image.esm.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Fade: () => (/* binding */ Fade),\n/* harmony export */   Slide: () => (/* binding */ Slide),\n/* harmony export */   Zoom: () => (/* binding */ Zoom)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! resize-observer-polyfill */ \"(ssr)/./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js\");\n/* harmony import */ var _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tweenjs/tween.js */ \"(ssr)/./node_modules/@tweenjs/tween.js/dist/tween.esm.js\");\n\n\n\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nvar getStartingIndex = function getStartingIndex(children, defaultIndex) {\n  if (defaultIndex && defaultIndex < react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(children)) {\n    return defaultIndex;\n  }\n  return 0;\n};\nvar getResponsiveSettings = function getResponsiveSettings(wrapperWidth, responsive) {\n  if (typeof window !== 'undefined' && Array.isArray(responsive)) {\n    return responsive.find(function (each) {\n      return each.breakpoint <= wrapperWidth;\n    });\n  }\n  return;\n};\nvar EASING_METHODS = {\n  linear: _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Easing.Linear.None,\n  ease: _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Easing.Quadratic.InOut,\n  'ease-in': _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Easing.Quadratic.In,\n  'ease-out': _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Easing.Quadratic.Out,\n  cubic: _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Easing.Cubic.InOut,\n  'cubic-in': _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Easing.Cubic.In,\n  'cubic-out': _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Easing.Cubic.Out\n};\nvar getEasing = function getEasing(easeMethod) {\n  if (easeMethod) {\n    return EASING_METHODS[easeMethod];\n  }\n  return EASING_METHODS.linear;\n};\nvar showPreviousArrow = function showPreviousArrow(_ref, currentIndex, moveSlides) {\n  var prevArrow = _ref.prevArrow,\n    infinite = _ref.infinite;\n  var isDisabled = currentIndex <= 0 && !infinite;\n  var props = {\n    'data-type': 'prev',\n    'aria-label': 'Previous Slide',\n    disabled: isDisabled,\n    onClick: moveSlides\n  };\n  if (prevArrow) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().cloneElement(prevArrow, _extends({\n      className: (prevArrow.props.className || '') + \" nav \" + (isDisabled ? 'disabled' : '')\n    }, props));\n  }\n  var className = \"nav default-nav \" + (isDisabled ? 'disabled' : '');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", Object.assign({\n    type: \"button\",\n    className: className\n  }, props), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"svg\", {\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", {\n    d: \"M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z\"\n  })));\n};\nvar showNextArrow = function showNextArrow(properties, currentIndex, moveSlides, responsiveSettings) {\n  var nextArrow = properties.nextArrow,\n    infinite = properties.infinite,\n    children = properties.children;\n  var slidesToScroll = 1;\n  if (responsiveSettings) {\n    slidesToScroll = responsiveSettings == null ? void 0 : responsiveSettings.settings.slidesToScroll;\n  } else if ('slidesToScroll' in properties) {\n    slidesToScroll = properties.slidesToScroll || 1;\n  }\n  var isDisabled = currentIndex >= react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(children) - slidesToScroll && !infinite;\n  var props = {\n    'data-type': 'next',\n    'aria-label': 'Next Slide',\n    disabled: isDisabled,\n    onClick: moveSlides\n  };\n  if (nextArrow) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().cloneElement(nextArrow, _extends({\n      className: (nextArrow.props.className || '') + \" nav \" + (isDisabled ? 'disabled' : '')\n    }, props));\n  }\n  var className = \"nav default-nav \" + (isDisabled ? 'disabled' : '');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", Object.assign({\n    type: \"button\",\n    className: className\n  }, props), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"svg\", {\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", {\n    d: \"M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z\"\n  })));\n};\nvar showDefaultIndicator = function showDefaultIndicator(isCurrentPageActive, key, indicatorProps) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"li\", {\n    key: key\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", Object.assign({\n    type: \"button\",\n    className: \"each-slideshow-indicator \" + (isCurrentPageActive ? 'active' : '')\n  }, indicatorProps)));\n};\nvar showCustomIndicator = function showCustomIndicator(isCurrentPageActive, key, indicatorProps, eachIndicator) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().cloneElement(eachIndicator, _extends({\n    className: eachIndicator.props.className + \" \" + (isCurrentPageActive ? 'active' : ''),\n    key: key\n  }, indicatorProps));\n};\nvar showIndicators = function showIndicators(props, currentIndex, navigate, responsiveSettings) {\n  var children = props.children,\n    indicators = props.indicators;\n  var slidesToScroll = 1;\n  if (responsiveSettings) {\n    slidesToScroll = responsiveSettings == null ? void 0 : responsiveSettings.settings.slidesToScroll;\n  } else if ('slidesToScroll' in props) {\n    slidesToScroll = props.slidesToScroll || 1;\n  }\n  var pages = Math.ceil(react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(children) / slidesToScroll);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"ul\", {\n    className: \"indicators\"\n  }, Array.from({\n    length: pages\n  }, function (_, key) {\n    var indicatorProps = {\n      'data-key': key,\n      'aria-label': \"Go to slide \" + (key + 1),\n      onClick: navigate\n    };\n    var isCurrentPageActive = Math.floor((currentIndex + slidesToScroll - 1) / slidesToScroll) === key;\n    if (typeof indicators === 'function') {\n      return showCustomIndicator(isCurrentPageActive, key, indicatorProps, indicators(key));\n    }\n    return showDefaultIndicator(isCurrentPageActive, key, indicatorProps);\n  }));\n};\n\nvar defaultProps = {\n  duration: 5000,\n  transitionDuration: 1000,\n  defaultIndex: 0,\n  infinite: true,\n  autoplay: true,\n  indicators: false,\n  arrows: true,\n  pauseOnHover: true,\n  easing: 'linear',\n  canSwipe: true,\n  cssClass: '',\n  responsive: []\n};\n\nvar FadeZoom = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().forwardRef(function (props, ref) {\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getStartingIndex(props.children, props.defaultIndex)),\n    index = _useState[0],\n    setIndex = _useState[1];\n  var wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var innerWrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var tweenGroup = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Group());\n  var timeout = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  var resizeObserver = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  var childrenCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(props.children);\n  }, [props.children]);\n  var applyStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (innerWrapperRef.current && wrapperRef.current) {\n      var wrapperWidth = wrapperRef.current.clientWidth;\n      var fullwidth = wrapperWidth * childrenCount;\n      innerWrapperRef.current.style.width = fullwidth + \"px\";\n      for (var _index = 0; _index < innerWrapperRef.current.children.length; _index++) {\n        var eachDiv = innerWrapperRef.current.children[_index];\n        if (eachDiv) {\n          eachDiv.style.width = wrapperWidth + \"px\";\n          eachDiv.style.left = _index * -wrapperWidth + \"px\";\n          eachDiv.style.display = \"block\";\n        }\n      }\n    }\n  }, [wrapperRef, innerWrapperRef, childrenCount]);\n  var initResizeObserver = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (wrapperRef.current) {\n      resizeObserver.current = new resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_1__[\"default\"](function (entries) {\n        if (!entries) return;\n        applyStyle();\n      });\n      resizeObserver.current.observe(wrapperRef.current);\n    }\n  }, [wrapperRef, applyStyle]);\n  var play = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var autoplay = props.autoplay,\n      children = props.children,\n      duration = props.duration,\n      infinite = props.infinite;\n    if (autoplay && react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(children) > 1 && (infinite || index < react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(children) - 1)) {\n      timeout.current = setTimeout(moveNext, duration);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props, index]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    initResizeObserver();\n    return function () {\n      tweenGroup.current.removeAll();\n      clearTimeout(timeout.current);\n      removeResizeObserver();\n    };\n  }, [initResizeObserver, tweenGroup]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    clearTimeout(timeout.current);\n    play();\n  }, [index, props.autoplay, play]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    applyStyle();\n  }, [childrenCount, applyStyle]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, function () {\n    return {\n      goNext: function goNext() {\n        moveNext();\n      },\n      goBack: function goBack() {\n        moveBack();\n      },\n      goTo: function goTo(index, options) {\n        if (options != null && options.skipTransition) {\n          setIndex(index);\n        } else {\n          moveTo(index);\n        }\n      }\n    };\n  });\n  var removeResizeObserver = function removeResizeObserver() {\n    if (resizeObserver.current && wrapperRef.current) {\n      resizeObserver.current.unobserve(wrapperRef.current);\n    }\n  };\n  var pauseSlides = function pauseSlides() {\n    if (props.pauseOnHover) {\n      clearTimeout(timeout.current);\n    }\n  };\n  var startSlides = function startSlides() {\n    var pauseOnHover = props.pauseOnHover,\n      autoplay = props.autoplay,\n      duration = props.duration;\n    if (pauseOnHover && autoplay) {\n      timeout.current = setTimeout(function () {\n        return moveNext();\n      }, duration);\n    }\n  };\n  var moveNext = function moveNext() {\n    var children = props.children,\n      infinite = props.infinite;\n    if (!infinite && index === react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(children) - 1) {\n      return;\n    }\n    transitionSlide((index + 1) % react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(children));\n  };\n  var moveBack = function moveBack() {\n    var children = props.children,\n      infinite = props.infinite;\n    if (!infinite && index === 0) {\n      return;\n    }\n    transitionSlide(index === 0 ? react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(children) - 1 : index - 1);\n  };\n  var preTransition = function preTransition(event) {\n    var currentTarget = event.currentTarget;\n    if (currentTarget.dataset.type === 'prev') {\n      moveBack();\n    } else {\n      moveNext();\n    }\n  };\n  var animate = function animate() {\n    requestAnimationFrame(animate);\n    tweenGroup.current.update();\n  };\n  var transitionSlide = function transitionSlide(newIndex) {\n    var existingTweens = tweenGroup.current.getAll();\n    if (!existingTweens.length) {\n      var _innerWrapperRef$curr;\n      if (!((_innerWrapperRef$curr = innerWrapperRef.current) != null && _innerWrapperRef$curr.children[newIndex])) {\n        newIndex = 0;\n      }\n      clearTimeout(timeout.current);\n      var value = {\n        opacity: 0,\n        scale: 1\n      };\n      animate();\n      var tween = new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Tween(value, tweenGroup.current).to({\n        opacity: 1,\n        scale: props.scale\n      }, props.transitionDuration).onUpdate(function (value) {\n        if (!innerWrapperRef.current) {\n          return;\n        }\n        innerWrapperRef.current.children[newIndex].style.opacity = value.opacity;\n        innerWrapperRef.current.children[index].style.opacity = 1 - value.opacity;\n        innerWrapperRef.current.children[index].style.transform = \"scale(\" + value.scale + \")\";\n      });\n      tween.easing(getEasing(props.easing));\n      tween.onStart(function () {\n        if (typeof props.onStartChange === 'function') {\n          props.onStartChange(index, newIndex);\n        }\n      });\n      tween.onComplete(function () {\n        if (innerWrapperRef.current) {\n          setIndex(newIndex);\n          innerWrapperRef.current.children[index].style.transform = \"scale(1)\";\n        }\n        if (typeof props.onChange === 'function') {\n          props.onChange(index, newIndex);\n        }\n      });\n      tween.start();\n    }\n  };\n  var moveTo = function moveTo(gotoIndex) {\n    if (gotoIndex !== index) {\n      transitionSlide(gotoIndex);\n    }\n  };\n  var navigate = function navigate(event) {\n    var currentTarget = event.currentTarget;\n    if (!currentTarget.dataset.key) {\n      return;\n    }\n    if (parseInt(currentTarget.dataset.key) !== index) {\n      moveTo(parseInt(currentTarget.dataset.key));\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    dir: \"ltr\",\n    \"aria-roledescription\": \"carousel\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"react-slideshow-container \" + (props.cssClass || ''),\n    onMouseEnter: pauseSlides,\n    onMouseOver: pauseSlides,\n    onMouseLeave: startSlides\n  }, props.arrows && showPreviousArrow(props, index, preTransition), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"react-slideshow-fadezoom-wrapper \" + props.cssClass,\n    ref: wrapperRef\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"react-slideshow-fadezoom-images-wrap\",\n    ref: innerWrapperRef\n  }, (react__WEBPACK_IMPORTED_MODULE_0___default().Children.map(props.children, function (thisArg) {\n    return thisArg;\n  }) || []).map(function (each, key) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      style: {\n        opacity: key === index ? '1' : '0',\n        zIndex: key === index ? '1' : '0'\n      },\n      \"data-index\": key,\n      key: key,\n      \"aria-roledescription\": \"slide\",\n      \"aria-hidden\": key === index ? 'false' : 'true'\n    }, each);\n  }))), props.arrows && showNextArrow(props, index, preTransition)), props.indicators && showIndicators(props, index, navigate));\n});\nFadeZoom.defaultProps = defaultProps;\n\nvar Fade = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().forwardRef(function (props, ref) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(FadeZoom, Object.assign({}, props, {\n    scale: 1,\n    ref: ref\n  }));\n});\nFade.defaultProps = defaultProps;\n\nvar Zoom = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().forwardRef(function (props, ref) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(FadeZoom, Object.assign({}, props, {\n    ref: ref\n  }));\n});\nZoom.defaultProps = defaultProps;\n\nvar Slide = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().forwardRef(function (props, ref) {\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getStartingIndex(props.children, props.defaultIndex)),\n    index = _useState[0],\n    setIndex = _useState[1];\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n    wrapperSize = _useState2[0],\n    setWrapperSize = _useState2[1];\n  var wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var innerWrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var tweenGroup = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Group());\n  var responsiveSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return getResponsiveSettings(wrapperSize, props.responsive);\n  }, [wrapperSize, props.responsive]);\n  var slidesToScroll = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    if (responsiveSettings) {\n      return responsiveSettings.settings.slidesToScroll;\n    }\n    return props.slidesToScroll || 1;\n  }, [responsiveSettings, props.slidesToScroll]);\n  var slidesToShow = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    if (responsiveSettings) {\n      return responsiveSettings.settings.slidesToShow;\n    }\n    return props.slidesToShow || 1;\n  }, [responsiveSettings, props.slidesToShow]);\n  var childrenCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().Children.count(props.children);\n  }, [props.children]);\n  var eachChildSize = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return wrapperSize / slidesToShow;\n  }, [wrapperSize, slidesToShow]);\n  var timeout = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  var resizeObserver = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  var startingSwipePosition;\n  var dragging = false;\n  var distanceSwiped = 0;\n  var translateType = props.vertical ? 'translateY' : 'translateX';\n  var swipeAttributeType = props.vertical ? 'clientY' : 'clientX';\n  var swipePageAttributeType = props.vertical ? 'pageY' : 'pageX';\n  var applyStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (innerWrapperRef.current) {\n      var fullSize = wrapperSize * innerWrapperRef.current.children.length;\n      var attribute = props.vertical ? 'height' : 'width';\n      innerWrapperRef.current.style[attribute] = fullSize + \"px\";\n      if (props.vertical && wrapperRef.current) {\n        wrapperRef.current.style[attribute] = wrapperSize + \"px\";\n      }\n      for (var _index = 0; _index < innerWrapperRef.current.children.length; _index++) {\n        var eachDiv = innerWrapperRef.current.children[_index];\n        if (eachDiv) {\n          if (!props.vertical) {\n            eachDiv.style[attribute] = eachChildSize + \"px\";\n          }\n          eachDiv.style.display = \"block\";\n        }\n      }\n    }\n  }, [wrapperSize, eachChildSize]);\n  var initResizeObserver = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (wrapperRef.current) {\n      resizeObserver.current = new resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_1__[\"default\"](function (entries) {\n        if (!entries) return;\n        setSize();\n      });\n      resizeObserver.current.observe(wrapperRef.current);\n    }\n  }, [wrapperRef]);\n  var play = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var autoplay = props.autoplay,\n      infinite = props.infinite,\n      duration = props.duration;\n    if (autoplay && (infinite || index < childrenCount - 1)) {\n      timeout.current = setTimeout(moveNext, duration);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props, childrenCount, index]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    applyStyle();\n  }, [wrapperSize, applyStyle]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    initResizeObserver();\n    return function () {\n      tweenGroup.current.removeAll();\n      clearTimeout(timeout.current);\n      removeResizeObserver();\n    };\n  }, [wrapperRef, initResizeObserver, tweenGroup]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    clearTimeout(timeout.current);\n    play();\n  }, [index, wrapperSize, props.autoplay, play]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, function () {\n    return {\n      goNext: function goNext() {\n        moveNext();\n      },\n      goBack: function goBack() {\n        moveBack();\n      },\n      goTo: function goTo(index, options) {\n        if (options != null && options.skipTransition) {\n          setIndex(index);\n        } else {\n          moveTo(index);\n        }\n      }\n    };\n  });\n  var removeResizeObserver = function removeResizeObserver() {\n    if (resizeObserver && wrapperRef.current) {\n      resizeObserver.current.unobserve(wrapperRef.current);\n    }\n  };\n  var pauseSlides = function pauseSlides() {\n    if (props.pauseOnHover) {\n      clearTimeout(timeout.current);\n    }\n  };\n  var swipe = function swipe(event) {\n    if (props.canSwipe && dragging) {\n      var position;\n      if (window.TouchEvent && event.nativeEvent instanceof TouchEvent) {\n        position = event.nativeEvent.touches[0][swipePageAttributeType];\n      } else {\n        position = event.nativeEvent[swipeAttributeType];\n      }\n      if (position && startingSwipePosition) {\n        var translateValue = eachChildSize * (index + getOffset());\n        var distance = position - startingSwipePosition;\n        if (!props.infinite && index === childrenCount - slidesToScroll && distance < 0) {\n          // if it is the last and infinite is false and you're swiping left\n          // then nothing happens\n          return;\n        }\n        if (!props.infinite && index === 0 && distance > 0) {\n          // if it is the first and infinite is false and you're swiping right\n          // then nothing happens\n          return;\n        }\n        distanceSwiped = distance;\n        translateValue -= distanceSwiped;\n        innerWrapperRef.current.style.transform = translateType + \"(-\" + translateValue + \"px)\";\n      }\n    }\n  };\n  var moveNext = function moveNext() {\n    if (!props.infinite && index === childrenCount - slidesToScroll) {\n      return;\n    }\n    var nextIndex = calculateIndex(index + slidesToScroll);\n    transitionSlide(nextIndex);\n  };\n  var moveBack = function moveBack() {\n    if (!props.infinite && index === 0) {\n      return;\n    }\n    var previousIndex = index - slidesToScroll;\n    if (previousIndex % slidesToScroll) {\n      previousIndex = Math.ceil(previousIndex / slidesToScroll) * slidesToScroll;\n    }\n    transitionSlide(previousIndex);\n  };\n  var goToSlide = function goToSlide(_ref) {\n    var currentTarget = _ref.currentTarget;\n    if (!currentTarget.dataset.key) {\n      return;\n    }\n    var datasetKey = parseInt(currentTarget.dataset.key);\n    moveTo(datasetKey * slidesToScroll);\n  };\n  var moveTo = function moveTo(index) {\n    transitionSlide(calculateIndex(index));\n  };\n  var calculateIndex = function calculateIndex(nextIndex) {\n    if (nextIndex < childrenCount && nextIndex + slidesToScroll > childrenCount) {\n      if ((childrenCount - slidesToScroll) % slidesToScroll) {\n        return childrenCount - slidesToScroll;\n      }\n      return nextIndex;\n    }\n    return nextIndex;\n  };\n  var startSlides = function startSlides() {\n    if (dragging) {\n      endSwipe();\n    } else if (props.pauseOnHover && props.autoplay) {\n      timeout.current = setTimeout(moveNext, props.duration);\n    }\n  };\n  var moveSlides = function moveSlides(_ref2) {\n    var dataset = _ref2.currentTarget.dataset;\n    if (dataset.type === 'next') {\n      moveNext();\n    } else {\n      moveBack();\n    }\n  };\n  var renderPreceedingSlides = function renderPreceedingSlides() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().Children.toArray(props.children).slice(-slidesToShow).map(function (each, index) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        \"data-index\": index - slidesToShow,\n        \"aria-roledescription\": \"slide\",\n        \"aria-hidden\": \"true\",\n        key: index - slidesToShow\n      }, each);\n    });\n  };\n  var renderTrailingSlides = function renderTrailingSlides() {\n    if (!props.infinite && slidesToShow === slidesToScroll) {\n      return;\n    }\n    return react__WEBPACK_IMPORTED_MODULE_0___default().Children.toArray(props.children).slice(0, slidesToShow).map(function (each, index) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        \"data-index\": childrenCount + index,\n        \"aria-roledescription\": \"slide\",\n        \"aria-hidden\": \"true\",\n        key: childrenCount + index\n      }, each);\n    });\n  };\n  var setSize = function setSize() {\n    var attribute = props.vertical ? 'clientHeight' : 'clientWidth';\n    if (props.vertical) {\n      if (innerWrapperRef.current) {\n        setWrapperSize(innerWrapperRef.current.children[0][attribute]);\n      }\n    } else {\n      if (wrapperRef.current) {\n        setWrapperSize(wrapperRef.current[attribute]);\n      }\n    }\n  };\n  var startSwipe = function startSwipe(event) {\n    if (props.canSwipe) {\n      if (window.TouchEvent && event.nativeEvent instanceof TouchEvent) {\n        startingSwipePosition = event.nativeEvent.touches[0][swipePageAttributeType];\n      } else {\n        startingSwipePosition = event.nativeEvent[swipeAttributeType];\n      }\n      clearTimeout(timeout.current);\n      dragging = true;\n    }\n  };\n  var endSwipe = function endSwipe() {\n    if (props.canSwipe) {\n      dragging = false;\n      if (Math.abs(distanceSwiped) / wrapperSize > 0.2) {\n        if (distanceSwiped < 0) {\n          moveNext();\n        } else {\n          moveBack();\n        }\n      } else {\n        if (Math.abs(distanceSwiped) > 0) {\n          transitionSlide(index, 300);\n        }\n      }\n    }\n  };\n  var animate = function animate() {\n    requestAnimationFrame(animate);\n    tweenGroup.current.update();\n  };\n  var transitionSlide = function transitionSlide(toIndex, animationDuration) {\n    var transitionDuration = animationDuration || props.transitionDuration;\n    var currentIndex = index;\n    var existingTweens = tweenGroup.current.getAll();\n    if (!wrapperRef.current) {\n      return;\n    }\n    var attribute = props.vertical ? 'clientHeight' : 'clientWidth';\n    var childSize = wrapperRef.current[attribute] / slidesToShow;\n    if (!existingTweens.length) {\n      clearTimeout(timeout.current);\n      var value = {\n        margin: -childSize * (currentIndex + getOffset()) + distanceSwiped\n      };\n      var tween = new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_2__.Tween(value, tweenGroup.current).to({\n        margin: -childSize * (toIndex + getOffset())\n      }, transitionDuration).onUpdate(function (value) {\n        if (innerWrapperRef.current) {\n          innerWrapperRef.current.style.transform = translateType + \"(\" + value.margin + \"px)\";\n        }\n      });\n      tween.easing(getEasing(props.easing));\n      animate();\n      var newIndex = toIndex;\n      if (newIndex < 0) {\n        newIndex = childrenCount - slidesToScroll;\n      } else if (newIndex >= childrenCount) {\n        newIndex = 0;\n      }\n      tween.onStart(function () {\n        if (typeof props.onStartChange === 'function') {\n          props.onStartChange(index, newIndex);\n        }\n      });\n      tween.onComplete(function () {\n        distanceSwiped = 0;\n        if (typeof props.onChange === 'function') {\n          props.onChange(index, newIndex);\n        }\n        setIndex(newIndex);\n      });\n      tween.start();\n    }\n  };\n  var isSlideActive = function isSlideActive(key) {\n    return key < index + slidesToShow && key >= index;\n  };\n  var getOffset = function getOffset() {\n    if (!props.infinite) {\n      return 0;\n    }\n    return slidesToShow;\n  };\n  var style = {\n    transform: translateType + \"(-\" + (index + getOffset()) * eachChildSize + \"px)\"\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    dir: \"ltr\",\n    \"aria-roledescription\": \"carousel\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"react-slideshow-container\",\n    onMouseEnter: pauseSlides,\n    onMouseOver: pauseSlides,\n    onMouseLeave: startSlides,\n    onMouseDown: startSwipe,\n    onMouseUp: endSwipe,\n    onMouseMove: swipe,\n    onTouchStart: startSwipe,\n    onTouchEnd: endSwipe,\n    onTouchCancel: endSwipe,\n    onTouchMove: swipe\n  }, props.arrows && showPreviousArrow(props, index, moveSlides), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"react-slideshow-wrapper slide \" + (props.cssClass || ''),\n    ref: wrapperRef\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"images-wrap \" + (props.vertical ? 'vertical' : 'horizontal'),\n    style: style,\n    ref: innerWrapperRef\n  }, props.infinite && renderPreceedingSlides(), (react__WEBPACK_IMPORTED_MODULE_0___default().Children.map(props.children, function (thisArg) {\n    return thisArg;\n  }) || []).map(function (each, key) {\n    var isThisSlideActive = isSlideActive(key);\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      \"data-index\": key,\n      key: key,\n      className: isThisSlideActive ? 'active' : '',\n      \"aria-roledescription\": \"slide\",\n      \"aria-hidden\": isThisSlideActive ? 'false' : 'true'\n    }, each);\n  }), renderTrailingSlides())), props.arrows && showNextArrow(props, index, moveSlides, responsiveSettings)), !!props.indicators && showIndicators(props, index, goToSlide, responsiveSettings));\n});\nSlide.defaultProps = defaultProps;\n\n\n//# sourceMappingURL=react-slideshow-image.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc2xpZGVzaG93LWltYWdlL2Rpc3QvcmVhY3Qtc2xpZGVzaG93LWltYWdlLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXNHO0FBQ2hEO0FBQ0c7O0FBRXpEO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxQ0FBcUMscURBQWM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscURBQU07QUFDaEIsUUFBUSxxREFBTTtBQUNkLGFBQWEscURBQU07QUFDbkIsY0FBYyxxREFBTTtBQUNwQixTQUFTLHFEQUFNO0FBQ2YsY0FBYyxxREFBTTtBQUNwQixlQUFlLHFEQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5REFBa0I7QUFDMUM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUI7QUFDekM7QUFDQTtBQUNBLEdBQUcsdUJBQXVCLDBEQUFtQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxHQUFHLGVBQWUsMERBQW1CO0FBQ3JDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLG1DQUFtQyxxREFBYztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5REFBa0I7QUFDMUM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUI7QUFDekM7QUFDQTtBQUNBLEdBQUcsdUJBQXVCLDBEQUFtQjtBQUM3QztB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QSxHQUFHLGVBQWUsMERBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLEdBQUcsK0NBQStDLHFEQUFjO0FBQ2hFO0FBQ0EsR0FBRztBQUNIO0FBQ0Esd0JBQXdCLDBEQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7O0FBRTZCO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RvcmUydS8uL25vZGVfbW9kdWxlcy9yZWFjdC1zbGlkZXNob3ctaW1hZ2UvZGlzdC9yZWFjdC1zbGlkZXNob3ctaW1hZ2UuZXNtLmpzPzUwNjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZU1lbW8sIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZUltcGVyYXRpdmVIYW5kbGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVzaXplT2JzZXJ2ZXIgZnJvbSAncmVzaXplLW9ic2VydmVyLXBvbHlmaWxsJztcbmltcG9ydCB7IEVhc2luZywgR3JvdXAsIFR3ZWVuIH0gZnJvbSAnQHR3ZWVuanMvdHdlZW4uanMnO1xuXG5mdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxudmFyIGdldFN0YXJ0aW5nSW5kZXggPSBmdW5jdGlvbiBnZXRTdGFydGluZ0luZGV4KGNoaWxkcmVuLCBkZWZhdWx0SW5kZXgpIHtcbiAgaWYgKGRlZmF1bHRJbmRleCAmJiBkZWZhdWx0SW5kZXggPCBSZWFjdC5DaGlsZHJlbi5jb3VudChjaGlsZHJlbikpIHtcbiAgICByZXR1cm4gZGVmYXVsdEluZGV4O1xuICB9XG4gIHJldHVybiAwO1xufTtcbnZhciBnZXRSZXNwb25zaXZlU2V0dGluZ3MgPSBmdW5jdGlvbiBnZXRSZXNwb25zaXZlU2V0dGluZ3Mod3JhcHBlcldpZHRoLCByZXNwb25zaXZlKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNpdmUpKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNpdmUuZmluZChmdW5jdGlvbiAoZWFjaCkge1xuICAgICAgcmV0dXJuIGVhY2guYnJlYWtwb2ludCA8PSB3cmFwcGVyV2lkdGg7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuO1xufTtcbnZhciBFQVNJTkdfTUVUSE9EUyA9IHtcbiAgbGluZWFyOiBFYXNpbmcuTGluZWFyLk5vbmUsXG4gIGVhc2U6IEVhc2luZy5RdWFkcmF0aWMuSW5PdXQsXG4gICdlYXNlLWluJzogRWFzaW5nLlF1YWRyYXRpYy5JbixcbiAgJ2Vhc2Utb3V0JzogRWFzaW5nLlF1YWRyYXRpYy5PdXQsXG4gIGN1YmljOiBFYXNpbmcuQ3ViaWMuSW5PdXQsXG4gICdjdWJpYy1pbic6IEVhc2luZy5DdWJpYy5JbixcbiAgJ2N1YmljLW91dCc6IEVhc2luZy5DdWJpYy5PdXRcbn07XG52YXIgZ2V0RWFzaW5nID0gZnVuY3Rpb24gZ2V0RWFzaW5nKGVhc2VNZXRob2QpIHtcbiAgaWYgKGVhc2VNZXRob2QpIHtcbiAgICByZXR1cm4gRUFTSU5HX01FVEhPRFNbZWFzZU1ldGhvZF07XG4gIH1cbiAgcmV0dXJuIEVBU0lOR19NRVRIT0RTLmxpbmVhcjtcbn07XG52YXIgc2hvd1ByZXZpb3VzQXJyb3cgPSBmdW5jdGlvbiBzaG93UHJldmlvdXNBcnJvdyhfcmVmLCBjdXJyZW50SW5kZXgsIG1vdmVTbGlkZXMpIHtcbiAgdmFyIHByZXZBcnJvdyA9IF9yZWYucHJldkFycm93LFxuICAgIGluZmluaXRlID0gX3JlZi5pbmZpbml0ZTtcbiAgdmFyIGlzRGlzYWJsZWQgPSBjdXJyZW50SW5kZXggPD0gMCAmJiAhaW5maW5pdGU7XG4gIHZhciBwcm9wcyA9IHtcbiAgICAnZGF0YS10eXBlJzogJ3ByZXYnLFxuICAgICdhcmlhLWxhYmVsJzogJ1ByZXZpb3VzIFNsaWRlJyxcbiAgICBkaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICBvbkNsaWNrOiBtb3ZlU2xpZGVzXG4gIH07XG4gIGlmIChwcmV2QXJyb3cpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChwcmV2QXJyb3csIF9leHRlbmRzKHtcbiAgICAgIGNsYXNzTmFtZTogKHByZXZBcnJvdy5wcm9wcy5jbGFzc05hbWUgfHwgJycpICsgXCIgbmF2IFwiICsgKGlzRGlzYWJsZWQgPyAnZGlzYWJsZWQnIDogJycpXG4gICAgfSwgcHJvcHMpKTtcbiAgfVxuICB2YXIgY2xhc3NOYW1lID0gXCJuYXYgZGVmYXVsdC1uYXYgXCIgKyAoaXNEaXNhYmxlZCA/ICdkaXNhYmxlZCcgOiAnJyk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHtcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lXG4gIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwge1xuICAgIHdpZHRoOiBcIjI0XCIsXG4gICAgaGVpZ2h0OiBcIjI0XCIsXG4gICAgdmlld0JveDogXCIwIDAgMjQgMjRcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTE2LjY3IDBsMi44MyAyLjgyOS05LjMzOSA5LjE3NSA5LjMzOSA5LjE2Ny0yLjgzIDIuODI5LTEyLjE3LTExLjk5NnpcIlxuICB9KSkpO1xufTtcbnZhciBzaG93TmV4dEFycm93ID0gZnVuY3Rpb24gc2hvd05leHRBcnJvdyhwcm9wZXJ0aWVzLCBjdXJyZW50SW5kZXgsIG1vdmVTbGlkZXMsIHJlc3BvbnNpdmVTZXR0aW5ncykge1xuICB2YXIgbmV4dEFycm93ID0gcHJvcGVydGllcy5uZXh0QXJyb3csXG4gICAgaW5maW5pdGUgPSBwcm9wZXJ0aWVzLmluZmluaXRlLFxuICAgIGNoaWxkcmVuID0gcHJvcGVydGllcy5jaGlsZHJlbjtcbiAgdmFyIHNsaWRlc1RvU2Nyb2xsID0gMTtcbiAgaWYgKHJlc3BvbnNpdmVTZXR0aW5ncykge1xuICAgIHNsaWRlc1RvU2Nyb2xsID0gcmVzcG9uc2l2ZVNldHRpbmdzID09IG51bGwgPyB2b2lkIDAgOiByZXNwb25zaXZlU2V0dGluZ3Muc2V0dGluZ3Muc2xpZGVzVG9TY3JvbGw7XG4gIH0gZWxzZSBpZiAoJ3NsaWRlc1RvU2Nyb2xsJyBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgc2xpZGVzVG9TY3JvbGwgPSBwcm9wZXJ0aWVzLnNsaWRlc1RvU2Nyb2xsIHx8IDE7XG4gIH1cbiAgdmFyIGlzRGlzYWJsZWQgPSBjdXJyZW50SW5kZXggPj0gUmVhY3QuQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pIC0gc2xpZGVzVG9TY3JvbGwgJiYgIWluZmluaXRlO1xuICB2YXIgcHJvcHMgPSB7XG4gICAgJ2RhdGEtdHlwZSc6ICduZXh0JyxcbiAgICAnYXJpYS1sYWJlbCc6ICdOZXh0IFNsaWRlJyxcbiAgICBkaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICBvbkNsaWNrOiBtb3ZlU2xpZGVzXG4gIH07XG4gIGlmIChuZXh0QXJyb3cpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChuZXh0QXJyb3csIF9leHRlbmRzKHtcbiAgICAgIGNsYXNzTmFtZTogKG5leHRBcnJvdy5wcm9wcy5jbGFzc05hbWUgfHwgJycpICsgXCIgbmF2IFwiICsgKGlzRGlzYWJsZWQgPyAnZGlzYWJsZWQnIDogJycpXG4gICAgfSwgcHJvcHMpKTtcbiAgfVxuICB2YXIgY2xhc3NOYW1lID0gXCJuYXYgZGVmYXVsdC1uYXYgXCIgKyAoaXNEaXNhYmxlZCA/ICdkaXNhYmxlZCcgOiAnJyk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHtcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lXG4gIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwge1xuICAgIHdpZHRoOiBcIjI0XCIsXG4gICAgaGVpZ2h0OiBcIjI0XCIsXG4gICAgdmlld0JveDogXCIwIDAgMjQgMjRcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTUgM2wzLjA1Ny0zIDExLjk0MyAxMi0xMS45NDMgMTItMy4wNTctMyA5LTl6XCJcbiAgfSkpKTtcbn07XG52YXIgc2hvd0RlZmF1bHRJbmRpY2F0b3IgPSBmdW5jdGlvbiBzaG93RGVmYXVsdEluZGljYXRvcihpc0N1cnJlbnRQYWdlQWN0aXZlLCBrZXksIGluZGljYXRvclByb3BzKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIHtcbiAgICBrZXk6IGtleVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHtcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIGNsYXNzTmFtZTogXCJlYWNoLXNsaWRlc2hvdy1pbmRpY2F0b3IgXCIgKyAoaXNDdXJyZW50UGFnZUFjdGl2ZSA/ICdhY3RpdmUnIDogJycpXG4gIH0sIGluZGljYXRvclByb3BzKSkpO1xufTtcbnZhciBzaG93Q3VzdG9tSW5kaWNhdG9yID0gZnVuY3Rpb24gc2hvd0N1c3RvbUluZGljYXRvcihpc0N1cnJlbnRQYWdlQWN0aXZlLCBrZXksIGluZGljYXRvclByb3BzLCBlYWNoSW5kaWNhdG9yKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY2xvbmVFbGVtZW50KGVhY2hJbmRpY2F0b3IsIF9leHRlbmRzKHtcbiAgICBjbGFzc05hbWU6IGVhY2hJbmRpY2F0b3IucHJvcHMuY2xhc3NOYW1lICsgXCIgXCIgKyAoaXNDdXJyZW50UGFnZUFjdGl2ZSA/ICdhY3RpdmUnIDogJycpLFxuICAgIGtleToga2V5XG4gIH0sIGluZGljYXRvclByb3BzKSk7XG59O1xudmFyIHNob3dJbmRpY2F0b3JzID0gZnVuY3Rpb24gc2hvd0luZGljYXRvcnMocHJvcHMsIGN1cnJlbnRJbmRleCwgbmF2aWdhdGUsIHJlc3BvbnNpdmVTZXR0aW5ncykge1xuICB2YXIgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbixcbiAgICBpbmRpY2F0b3JzID0gcHJvcHMuaW5kaWNhdG9ycztcbiAgdmFyIHNsaWRlc1RvU2Nyb2xsID0gMTtcbiAgaWYgKHJlc3BvbnNpdmVTZXR0aW5ncykge1xuICAgIHNsaWRlc1RvU2Nyb2xsID0gcmVzcG9uc2l2ZVNldHRpbmdzID09IG51bGwgPyB2b2lkIDAgOiByZXNwb25zaXZlU2V0dGluZ3Muc2V0dGluZ3Muc2xpZGVzVG9TY3JvbGw7XG4gIH0gZWxzZSBpZiAoJ3NsaWRlc1RvU2Nyb2xsJyBpbiBwcm9wcykge1xuICAgIHNsaWRlc1RvU2Nyb2xsID0gcHJvcHMuc2xpZGVzVG9TY3JvbGwgfHwgMTtcbiAgfVxuICB2YXIgcGFnZXMgPSBNYXRoLmNlaWwoUmVhY3QuQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pIC8gc2xpZGVzVG9TY3JvbGwpO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImluZGljYXRvcnNcIlxuICB9LCBBcnJheS5mcm9tKHtcbiAgICBsZW5ndGg6IHBhZ2VzXG4gIH0sIGZ1bmN0aW9uIChfLCBrZXkpIHtcbiAgICB2YXIgaW5kaWNhdG9yUHJvcHMgPSB7XG4gICAgICAnZGF0YS1rZXknOiBrZXksXG4gICAgICAnYXJpYS1sYWJlbCc6IFwiR28gdG8gc2xpZGUgXCIgKyAoa2V5ICsgMSksXG4gICAgICBvbkNsaWNrOiBuYXZpZ2F0ZVxuICAgIH07XG4gICAgdmFyIGlzQ3VycmVudFBhZ2VBY3RpdmUgPSBNYXRoLmZsb29yKChjdXJyZW50SW5kZXggKyBzbGlkZXNUb1Njcm9sbCAtIDEpIC8gc2xpZGVzVG9TY3JvbGwpID09PSBrZXk7XG4gICAgaWYgKHR5cGVvZiBpbmRpY2F0b3JzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gc2hvd0N1c3RvbUluZGljYXRvcihpc0N1cnJlbnRQYWdlQWN0aXZlLCBrZXksIGluZGljYXRvclByb3BzLCBpbmRpY2F0b3JzKGtleSkpO1xuICAgIH1cbiAgICByZXR1cm4gc2hvd0RlZmF1bHRJbmRpY2F0b3IoaXNDdXJyZW50UGFnZUFjdGl2ZSwga2V5LCBpbmRpY2F0b3JQcm9wcyk7XG4gIH0pKTtcbn07XG5cbnZhciBkZWZhdWx0UHJvcHMgPSB7XG4gIGR1cmF0aW9uOiA1MDAwLFxuICB0cmFuc2l0aW9uRHVyYXRpb246IDEwMDAsXG4gIGRlZmF1bHRJbmRleDogMCxcbiAgaW5maW5pdGU6IHRydWUsXG4gIGF1dG9wbGF5OiB0cnVlLFxuICBpbmRpY2F0b3JzOiBmYWxzZSxcbiAgYXJyb3dzOiB0cnVlLFxuICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gIGVhc2luZzogJ2xpbmVhcicsXG4gIGNhblN3aXBlOiB0cnVlLFxuICBjc3NDbGFzczogJycsXG4gIHJlc3BvbnNpdmU6IFtdXG59O1xuXG52YXIgRmFkZVpvb20gPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoZ2V0U3RhcnRpbmdJbmRleChwcm9wcy5jaGlsZHJlbiwgcHJvcHMuZGVmYXVsdEluZGV4KSksXG4gICAgaW5kZXggPSBfdXNlU3RhdGVbMF0sXG4gICAgc2V0SW5kZXggPSBfdXNlU3RhdGVbMV07XG4gIHZhciB3cmFwcGVyUmVmID0gdXNlUmVmKG51bGwpO1xuICB2YXIgaW5uZXJXcmFwcGVyUmVmID0gdXNlUmVmKG51bGwpO1xuICB2YXIgdHdlZW5Hcm91cCA9IHVzZVJlZihuZXcgR3JvdXAoKSk7XG4gIHZhciB0aW1lb3V0ID0gdXNlUmVmKCk7XG4gIHZhciByZXNpemVPYnNlcnZlciA9IHVzZVJlZigpO1xuICB2YXIgY2hpbGRyZW5Db3VudCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi5jb3VudChwcm9wcy5jaGlsZHJlbik7XG4gIH0sIFtwcm9wcy5jaGlsZHJlbl0pO1xuICB2YXIgYXBwbHlTdHlsZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaW5uZXJXcmFwcGVyUmVmLmN1cnJlbnQgJiYgd3JhcHBlclJlZi5jdXJyZW50KSB7XG4gICAgICB2YXIgd3JhcHBlcldpZHRoID0gd3JhcHBlclJlZi5jdXJyZW50LmNsaWVudFdpZHRoO1xuICAgICAgdmFyIGZ1bGx3aWR0aCA9IHdyYXBwZXJXaWR0aCAqIGNoaWxkcmVuQ291bnQ7XG4gICAgICBpbm5lcldyYXBwZXJSZWYuY3VycmVudC5zdHlsZS53aWR0aCA9IGZ1bGx3aWR0aCArIFwicHhcIjtcbiAgICAgIGZvciAodmFyIF9pbmRleCA9IDA7IF9pbmRleCA8IGlubmVyV3JhcHBlclJlZi5jdXJyZW50LmNoaWxkcmVuLmxlbmd0aDsgX2luZGV4KyspIHtcbiAgICAgICAgdmFyIGVhY2hEaXYgPSBpbm5lcldyYXBwZXJSZWYuY3VycmVudC5jaGlsZHJlbltfaW5kZXhdO1xuICAgICAgICBpZiAoZWFjaERpdikge1xuICAgICAgICAgIGVhY2hEaXYuc3R5bGUud2lkdGggPSB3cmFwcGVyV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgZWFjaERpdi5zdHlsZS5sZWZ0ID0gX2luZGV4ICogLXdyYXBwZXJXaWR0aCArIFwicHhcIjtcbiAgICAgICAgICBlYWNoRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFt3cmFwcGVyUmVmLCBpbm5lcldyYXBwZXJSZWYsIGNoaWxkcmVuQ291bnRdKTtcbiAgdmFyIGluaXRSZXNpemVPYnNlcnZlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAod3JhcHBlclJlZi5jdXJyZW50KSB7XG4gICAgICByZXNpemVPYnNlcnZlci5jdXJyZW50ID0gbmV3IFJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgIGlmICghZW50cmllcykgcmV0dXJuO1xuICAgICAgICBhcHBseVN0eWxlKCk7XG4gICAgICB9KTtcbiAgICAgIHJlc2l6ZU9ic2VydmVyLmN1cnJlbnQub2JzZXJ2ZSh3cmFwcGVyUmVmLmN1cnJlbnQpO1xuICAgIH1cbiAgfSwgW3dyYXBwZXJSZWYsIGFwcGx5U3R5bGVdKTtcbiAgdmFyIHBsYXkgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF1dG9wbGF5ID0gcHJvcHMuYXV0b3BsYXksXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgZHVyYXRpb24gPSBwcm9wcy5kdXJhdGlvbixcbiAgICAgIGluZmluaXRlID0gcHJvcHMuaW5maW5pdGU7XG4gICAgaWYgKGF1dG9wbGF5ICYmIFJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSA+IDEgJiYgKGluZmluaXRlIHx8IGluZGV4IDwgUmVhY3QuQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pIC0gMSkpIHtcbiAgICAgIHRpbWVvdXQuY3VycmVudCA9IHNldFRpbWVvdXQobW92ZU5leHQsIGR1cmF0aW9uKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbcHJvcHMsIGluZGV4XSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaW5pdFJlc2l6ZU9ic2VydmVyKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHR3ZWVuR3JvdXAuY3VycmVudC5yZW1vdmVBbGwoKTtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0LmN1cnJlbnQpO1xuICAgICAgcmVtb3ZlUmVzaXplT2JzZXJ2ZXIoKTtcbiAgICB9O1xuICB9LCBbaW5pdFJlc2l6ZU9ic2VydmVyLCB0d2Vlbkdyb3VwXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQuY3VycmVudCk7XG4gICAgcGxheSgpO1xuICB9LCBbaW5kZXgsIHByb3BzLmF1dG9wbGF5LCBwbGF5XSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgYXBwbHlTdHlsZSgpO1xuICB9LCBbY2hpbGRyZW5Db3VudCwgYXBwbHlTdHlsZV0pO1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBnb05leHQ6IGZ1bmN0aW9uIGdvTmV4dCgpIHtcbiAgICAgICAgbW92ZU5leHQoKTtcbiAgICAgIH0sXG4gICAgICBnb0JhY2s6IGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICAgICAgbW92ZUJhY2soKTtcbiAgICAgIH0sXG4gICAgICBnb1RvOiBmdW5jdGlvbiBnb1RvKGluZGV4LCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zICE9IG51bGwgJiYgb3B0aW9ucy5za2lwVHJhbnNpdGlvbikge1xuICAgICAgICAgIHNldEluZGV4KGluZGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb3ZlVG8oaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4gIHZhciByZW1vdmVSZXNpemVPYnNlcnZlciA9IGZ1bmN0aW9uIHJlbW92ZVJlc2l6ZU9ic2VydmVyKCkge1xuICAgIGlmIChyZXNpemVPYnNlcnZlci5jdXJyZW50ICYmIHdyYXBwZXJSZWYuY3VycmVudCkge1xuICAgICAgcmVzaXplT2JzZXJ2ZXIuY3VycmVudC51bm9ic2VydmUod3JhcHBlclJlZi5jdXJyZW50KTtcbiAgICB9XG4gIH07XG4gIHZhciBwYXVzZVNsaWRlcyA9IGZ1bmN0aW9uIHBhdXNlU2xpZGVzKCkge1xuICAgIGlmIChwcm9wcy5wYXVzZU9uSG92ZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0LmN1cnJlbnQpO1xuICAgIH1cbiAgfTtcbiAgdmFyIHN0YXJ0U2xpZGVzID0gZnVuY3Rpb24gc3RhcnRTbGlkZXMoKSB7XG4gICAgdmFyIHBhdXNlT25Ib3ZlciA9IHByb3BzLnBhdXNlT25Ib3ZlcixcbiAgICAgIGF1dG9wbGF5ID0gcHJvcHMuYXV0b3BsYXksXG4gICAgICBkdXJhdGlvbiA9IHByb3BzLmR1cmF0aW9uO1xuICAgIGlmIChwYXVzZU9uSG92ZXIgJiYgYXV0b3BsYXkpIHtcbiAgICAgIHRpbWVvdXQuY3VycmVudCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbW92ZU5leHQoKTtcbiAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICB9XG4gIH07XG4gIHZhciBtb3ZlTmV4dCA9IGZ1bmN0aW9uIG1vdmVOZXh0KCkge1xuICAgIHZhciBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgaW5maW5pdGUgPSBwcm9wcy5pbmZpbml0ZTtcbiAgICBpZiAoIWluZmluaXRlICYmIGluZGV4ID09PSBSZWFjdC5DaGlsZHJlbi5jb3VudChjaGlsZHJlbikgLSAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyYW5zaXRpb25TbGlkZSgoaW5kZXggKyAxKSAlIFJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSk7XG4gIH07XG4gIHZhciBtb3ZlQmFjayA9IGZ1bmN0aW9uIG1vdmVCYWNrKCkge1xuICAgIHZhciBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgaW5maW5pdGUgPSBwcm9wcy5pbmZpbml0ZTtcbiAgICBpZiAoIWluZmluaXRlICYmIGluZGV4ID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyYW5zaXRpb25TbGlkZShpbmRleCA9PT0gMCA/IFJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSAtIDEgOiBpbmRleCAtIDEpO1xuICB9O1xuICB2YXIgcHJlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIHByZVRyYW5zaXRpb24oZXZlbnQpIHtcbiAgICB2YXIgY3VycmVudFRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgaWYgKGN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlID09PSAncHJldicpIHtcbiAgICAgIG1vdmVCYWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vdmVOZXh0KCk7XG4gICAgfVxuICB9O1xuICB2YXIgYW5pbWF0ZSA9IGZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgIHR3ZWVuR3JvdXAuY3VycmVudC51cGRhdGUoKTtcbiAgfTtcbiAgdmFyIHRyYW5zaXRpb25TbGlkZSA9IGZ1bmN0aW9uIHRyYW5zaXRpb25TbGlkZShuZXdJbmRleCkge1xuICAgIHZhciBleGlzdGluZ1R3ZWVucyA9IHR3ZWVuR3JvdXAuY3VycmVudC5nZXRBbGwoKTtcbiAgICBpZiAoIWV4aXN0aW5nVHdlZW5zLmxlbmd0aCkge1xuICAgICAgdmFyIF9pbm5lcldyYXBwZXJSZWYkY3VycjtcbiAgICAgIGlmICghKChfaW5uZXJXcmFwcGVyUmVmJGN1cnIgPSBpbm5lcldyYXBwZXJSZWYuY3VycmVudCkgIT0gbnVsbCAmJiBfaW5uZXJXcmFwcGVyUmVmJGN1cnIuY2hpbGRyZW5bbmV3SW5kZXhdKSkge1xuICAgICAgICBuZXdJbmRleCA9IDA7XG4gICAgICB9XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dC5jdXJyZW50KTtcbiAgICAgIHZhciB2YWx1ZSA9IHtcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgc2NhbGU6IDFcbiAgICAgIH07XG4gICAgICBhbmltYXRlKCk7XG4gICAgICB2YXIgdHdlZW4gPSBuZXcgVHdlZW4odmFsdWUsIHR3ZWVuR3JvdXAuY3VycmVudCkudG8oe1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBzY2FsZTogcHJvcHMuc2NhbGVcbiAgICAgIH0sIHByb3BzLnRyYW5zaXRpb25EdXJhdGlvbikub25VcGRhdGUoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghaW5uZXJXcmFwcGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaW5uZXJXcmFwcGVyUmVmLmN1cnJlbnQuY2hpbGRyZW5bbmV3SW5kZXhdLnN0eWxlLm9wYWNpdHkgPSB2YWx1ZS5vcGFjaXR5O1xuICAgICAgICBpbm5lcldyYXBwZXJSZWYuY3VycmVudC5jaGlsZHJlbltpbmRleF0uc3R5bGUub3BhY2l0eSA9IDEgLSB2YWx1ZS5vcGFjaXR5O1xuICAgICAgICBpbm5lcldyYXBwZXJSZWYuY3VycmVudC5jaGlsZHJlbltpbmRleF0uc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZShcIiArIHZhbHVlLnNjYWxlICsgXCIpXCI7XG4gICAgICB9KTtcbiAgICAgIHR3ZWVuLmVhc2luZyhnZXRFYXNpbmcocHJvcHMuZWFzaW5nKSk7XG4gICAgICB0d2Vlbi5vblN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wcy5vblN0YXJ0Q2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcHJvcHMub25TdGFydENoYW5nZShpbmRleCwgbmV3SW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHR3ZWVuLm9uQ29tcGxldGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaW5uZXJXcmFwcGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBzZXRJbmRleChuZXdJbmRleCk7XG4gICAgICAgICAgaW5uZXJXcmFwcGVyUmVmLmN1cnJlbnQuY2hpbGRyZW5baW5kZXhdLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoMSlcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHByb3BzLm9uQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcHJvcHMub25DaGFuZ2UoaW5kZXgsIG5ld0luZGV4KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0d2Vlbi5zdGFydCgpO1xuICAgIH1cbiAgfTtcbiAgdmFyIG1vdmVUbyA9IGZ1bmN0aW9uIG1vdmVUbyhnb3RvSW5kZXgpIHtcbiAgICBpZiAoZ290b0luZGV4ICE9PSBpbmRleCkge1xuICAgICAgdHJhbnNpdGlvblNsaWRlKGdvdG9JbmRleCk7XG4gICAgfVxuICB9O1xuICB2YXIgbmF2aWdhdGUgPSBmdW5jdGlvbiBuYXZpZ2F0ZShldmVudCkge1xuICAgIHZhciBjdXJyZW50VGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICBpZiAoIWN1cnJlbnRUYXJnZXQuZGF0YXNldC5rZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHBhcnNlSW50KGN1cnJlbnRUYXJnZXQuZGF0YXNldC5rZXkpICE9PSBpbmRleCkge1xuICAgICAgbW92ZVRvKHBhcnNlSW50KGN1cnJlbnRUYXJnZXQuZGF0YXNldC5rZXkpKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgZGlyOiBcImx0clwiLFxuICAgIFwiYXJpYS1yb2xlZGVzY3JpcHRpb25cIjogXCJjYXJvdXNlbFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwicmVhY3Qtc2xpZGVzaG93LWNvbnRhaW5lciBcIiArIChwcm9wcy5jc3NDbGFzcyB8fCAnJyksXG4gICAgb25Nb3VzZUVudGVyOiBwYXVzZVNsaWRlcyxcbiAgICBvbk1vdXNlT3ZlcjogcGF1c2VTbGlkZXMsXG4gICAgb25Nb3VzZUxlYXZlOiBzdGFydFNsaWRlc1xuICB9LCBwcm9wcy5hcnJvd3MgJiYgc2hvd1ByZXZpb3VzQXJyb3cocHJvcHMsIGluZGV4LCBwcmVUcmFuc2l0aW9uKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJyZWFjdC1zbGlkZXNob3ctZmFkZXpvb20td3JhcHBlciBcIiArIHByb3BzLmNzc0NsYXNzLFxuICAgIHJlZjogd3JhcHBlclJlZlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInJlYWN0LXNsaWRlc2hvdy1mYWRlem9vbS1pbWFnZXMtd3JhcFwiLFxuICAgIHJlZjogaW5uZXJXcmFwcGVyUmVmXG4gIH0sIChSZWFjdC5DaGlsZHJlbi5tYXAocHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uICh0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXNBcmc7XG4gIH0pIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGVhY2gsIGtleSkge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBzdHlsZToge1xuICAgICAgICBvcGFjaXR5OiBrZXkgPT09IGluZGV4ID8gJzEnIDogJzAnLFxuICAgICAgICB6SW5kZXg6IGtleSA9PT0gaW5kZXggPyAnMScgOiAnMCdcbiAgICAgIH0sXG4gICAgICBcImRhdGEtaW5kZXhcIjoga2V5LFxuICAgICAga2V5OiBrZXksXG4gICAgICBcImFyaWEtcm9sZWRlc2NyaXB0aW9uXCI6IFwic2xpZGVcIixcbiAgICAgIFwiYXJpYS1oaWRkZW5cIjoga2V5ID09PSBpbmRleCA/ICdmYWxzZScgOiAndHJ1ZSdcbiAgICB9LCBlYWNoKTtcbiAgfSkpKSwgcHJvcHMuYXJyb3dzICYmIHNob3dOZXh0QXJyb3cocHJvcHMsIGluZGV4LCBwcmVUcmFuc2l0aW9uKSksIHByb3BzLmluZGljYXRvcnMgJiYgc2hvd0luZGljYXRvcnMocHJvcHMsIGluZGV4LCBuYXZpZ2F0ZSkpO1xufSk7XG5GYWRlWm9vbS5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5cbnZhciBGYWRlID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZhZGVab29tLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcywge1xuICAgIHNjYWxlOiAxLFxuICAgIHJlZjogcmVmXG4gIH0pKTtcbn0pO1xuRmFkZS5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5cbnZhciBab29tID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZhZGVab29tLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pKTtcbn0pO1xuWm9vbS5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5cbnZhciBTbGlkZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShnZXRTdGFydGluZ0luZGV4KHByb3BzLmNoaWxkcmVuLCBwcm9wcy5kZWZhdWx0SW5kZXgpKSxcbiAgICBpbmRleCA9IF91c2VTdGF0ZVswXSxcbiAgICBzZXRJbmRleCA9IF91c2VTdGF0ZVsxXTtcbiAgdmFyIF91c2VTdGF0ZTIgPSB1c2VTdGF0ZSgwKSxcbiAgICB3cmFwcGVyU2l6ZSA9IF91c2VTdGF0ZTJbMF0sXG4gICAgc2V0V3JhcHBlclNpemUgPSBfdXNlU3RhdGUyWzFdO1xuICB2YXIgd3JhcHBlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgdmFyIGlubmVyV3JhcHBlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgdmFyIHR3ZWVuR3JvdXAgPSB1c2VSZWYobmV3IEdyb3VwKCkpO1xuICB2YXIgcmVzcG9uc2l2ZVNldHRpbmdzID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldFJlc3BvbnNpdmVTZXR0aW5ncyh3cmFwcGVyU2l6ZSwgcHJvcHMucmVzcG9uc2l2ZSk7XG4gIH0sIFt3cmFwcGVyU2l6ZSwgcHJvcHMucmVzcG9uc2l2ZV0pO1xuICB2YXIgc2xpZGVzVG9TY3JvbGwgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAocmVzcG9uc2l2ZVNldHRpbmdzKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2l2ZVNldHRpbmdzLnNldHRpbmdzLnNsaWRlc1RvU2Nyb2xsO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcHMuc2xpZGVzVG9TY3JvbGwgfHwgMTtcbiAgfSwgW3Jlc3BvbnNpdmVTZXR0aW5ncywgcHJvcHMuc2xpZGVzVG9TY3JvbGxdKTtcbiAgdmFyIHNsaWRlc1RvU2hvdyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIGlmIChyZXNwb25zaXZlU2V0dGluZ3MpIHtcbiAgICAgIHJldHVybiByZXNwb25zaXZlU2V0dGluZ3Muc2V0dGluZ3Muc2xpZGVzVG9TaG93O1xuICAgIH1cbiAgICByZXR1cm4gcHJvcHMuc2xpZGVzVG9TaG93IHx8IDE7XG4gIH0sIFtyZXNwb25zaXZlU2V0dGluZ3MsIHByb3BzLnNsaWRlc1RvU2hvd10pO1xuICB2YXIgY2hpbGRyZW5Db3VudCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi5jb3VudChwcm9wcy5jaGlsZHJlbik7XG4gIH0sIFtwcm9wcy5jaGlsZHJlbl0pO1xuICB2YXIgZWFjaENoaWxkU2l6ZSA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB3cmFwcGVyU2l6ZSAvIHNsaWRlc1RvU2hvdztcbiAgfSwgW3dyYXBwZXJTaXplLCBzbGlkZXNUb1Nob3ddKTtcbiAgdmFyIHRpbWVvdXQgPSB1c2VSZWYoKTtcbiAgdmFyIHJlc2l6ZU9ic2VydmVyID0gdXNlUmVmKCk7XG4gIHZhciBzdGFydGluZ1N3aXBlUG9zaXRpb247XG4gIHZhciBkcmFnZ2luZyA9IGZhbHNlO1xuICB2YXIgZGlzdGFuY2VTd2lwZWQgPSAwO1xuICB2YXIgdHJhbnNsYXRlVHlwZSA9IHByb3BzLnZlcnRpY2FsID8gJ3RyYW5zbGF0ZVknIDogJ3RyYW5zbGF0ZVgnO1xuICB2YXIgc3dpcGVBdHRyaWJ1dGVUeXBlID0gcHJvcHMudmVydGljYWwgPyAnY2xpZW50WScgOiAnY2xpZW50WCc7XG4gIHZhciBzd2lwZVBhZ2VBdHRyaWJ1dGVUeXBlID0gcHJvcHMudmVydGljYWwgPyAncGFnZVknIDogJ3BhZ2VYJztcbiAgdmFyIGFwcGx5U3R5bGUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGlubmVyV3JhcHBlclJlZi5jdXJyZW50KSB7XG4gICAgICB2YXIgZnVsbFNpemUgPSB3cmFwcGVyU2l6ZSAqIGlubmVyV3JhcHBlclJlZi5jdXJyZW50LmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIHZhciBhdHRyaWJ1dGUgPSBwcm9wcy52ZXJ0aWNhbCA/ICdoZWlnaHQnIDogJ3dpZHRoJztcbiAgICAgIGlubmVyV3JhcHBlclJlZi5jdXJyZW50LnN0eWxlW2F0dHJpYnV0ZV0gPSBmdWxsU2l6ZSArIFwicHhcIjtcbiAgICAgIGlmIChwcm9wcy52ZXJ0aWNhbCAmJiB3cmFwcGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgd3JhcHBlclJlZi5jdXJyZW50LnN0eWxlW2F0dHJpYnV0ZV0gPSB3cmFwcGVyU2l6ZSArIFwicHhcIjtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIF9pbmRleCA9IDA7IF9pbmRleCA8IGlubmVyV3JhcHBlclJlZi5jdXJyZW50LmNoaWxkcmVuLmxlbmd0aDsgX2luZGV4KyspIHtcbiAgICAgICAgdmFyIGVhY2hEaXYgPSBpbm5lcldyYXBwZXJSZWYuY3VycmVudC5jaGlsZHJlbltfaW5kZXhdO1xuICAgICAgICBpZiAoZWFjaERpdikge1xuICAgICAgICAgIGlmICghcHJvcHMudmVydGljYWwpIHtcbiAgICAgICAgICAgIGVhY2hEaXYuc3R5bGVbYXR0cmlidXRlXSA9IGVhY2hDaGlsZFNpemUgKyBcInB4XCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVhY2hEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3dyYXBwZXJTaXplLCBlYWNoQ2hpbGRTaXplXSk7XG4gIHZhciBpbml0UmVzaXplT2JzZXJ2ZXIgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHdyYXBwZXJSZWYuY3VycmVudCkge1xuICAgICAgcmVzaXplT2JzZXJ2ZXIuY3VycmVudCA9IG5ldyBSZXNpemVPYnNlcnZlcihmdW5jdGlvbiAoZW50cmllcykge1xuICAgICAgICBpZiAoIWVudHJpZXMpIHJldHVybjtcbiAgICAgICAgc2V0U2l6ZSgpO1xuICAgICAgfSk7XG4gICAgICByZXNpemVPYnNlcnZlci5jdXJyZW50Lm9ic2VydmUod3JhcHBlclJlZi5jdXJyZW50KTtcbiAgICB9XG4gIH0sIFt3cmFwcGVyUmVmXSk7XG4gIHZhciBwbGF5ID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBhdXRvcGxheSA9IHByb3BzLmF1dG9wbGF5LFxuICAgICAgaW5maW5pdGUgPSBwcm9wcy5pbmZpbml0ZSxcbiAgICAgIGR1cmF0aW9uID0gcHJvcHMuZHVyYXRpb247XG4gICAgaWYgKGF1dG9wbGF5ICYmIChpbmZpbml0ZSB8fCBpbmRleCA8IGNoaWxkcmVuQ291bnQgLSAxKSkge1xuICAgICAgdGltZW91dC5jdXJyZW50ID0gc2V0VGltZW91dChtb3ZlTmV4dCwgZHVyYXRpb24pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtwcm9wcywgY2hpbGRyZW5Db3VudCwgaW5kZXhdKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBhcHBseVN0eWxlKCk7XG4gIH0sIFt3cmFwcGVyU2l6ZSwgYXBwbHlTdHlsZV0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGluaXRSZXNpemVPYnNlcnZlcigpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB0d2Vlbkdyb3VwLmN1cnJlbnQucmVtb3ZlQWxsKCk7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dC5jdXJyZW50KTtcbiAgICAgIHJlbW92ZVJlc2l6ZU9ic2VydmVyKCk7XG4gICAgfTtcbiAgfSwgW3dyYXBwZXJSZWYsIGluaXRSZXNpemVPYnNlcnZlciwgdHdlZW5Hcm91cF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0LmN1cnJlbnQpO1xuICAgIHBsYXkoKTtcbiAgfSwgW2luZGV4LCB3cmFwcGVyU2l6ZSwgcHJvcHMuYXV0b3BsYXksIHBsYXldKTtcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ29OZXh0OiBmdW5jdGlvbiBnb05leHQoKSB7XG4gICAgICAgIG1vdmVOZXh0KCk7XG4gICAgICB9LFxuICAgICAgZ29CYWNrOiBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgICAgIG1vdmVCYWNrKCk7XG4gICAgICB9LFxuICAgICAgZ29UbzogZnVuY3Rpb24gZ29UbyhpbmRleCwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyAhPSBudWxsICYmIG9wdGlvbnMuc2tpcFRyYW5zaXRpb24pIHtcbiAgICAgICAgICBzZXRJbmRleChpbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW92ZVRvKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0pO1xuICB2YXIgcmVtb3ZlUmVzaXplT2JzZXJ2ZXIgPSBmdW5jdGlvbiByZW1vdmVSZXNpemVPYnNlcnZlcigpIHtcbiAgICBpZiAocmVzaXplT2JzZXJ2ZXIgJiYgd3JhcHBlclJlZi5jdXJyZW50KSB7XG4gICAgICByZXNpemVPYnNlcnZlci5jdXJyZW50LnVub2JzZXJ2ZSh3cmFwcGVyUmVmLmN1cnJlbnQpO1xuICAgIH1cbiAgfTtcbiAgdmFyIHBhdXNlU2xpZGVzID0gZnVuY3Rpb24gcGF1c2VTbGlkZXMoKSB7XG4gICAgaWYgKHByb3BzLnBhdXNlT25Ib3Zlcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQuY3VycmVudCk7XG4gICAgfVxuICB9O1xuICB2YXIgc3dpcGUgPSBmdW5jdGlvbiBzd2lwZShldmVudCkge1xuICAgIGlmIChwcm9wcy5jYW5Td2lwZSAmJiBkcmFnZ2luZykge1xuICAgICAgdmFyIHBvc2l0aW9uO1xuICAgICAgaWYgKHdpbmRvdy5Ub3VjaEV2ZW50ICYmIGV2ZW50Lm5hdGl2ZUV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCkge1xuICAgICAgICBwb3NpdGlvbiA9IGV2ZW50Lm5hdGl2ZUV2ZW50LnRvdWNoZXNbMF1bc3dpcGVQYWdlQXR0cmlidXRlVHlwZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb3NpdGlvbiA9IGV2ZW50Lm5hdGl2ZUV2ZW50W3N3aXBlQXR0cmlidXRlVHlwZV07XG4gICAgICB9XG4gICAgICBpZiAocG9zaXRpb24gJiYgc3RhcnRpbmdTd2lwZVBvc2l0aW9uKSB7XG4gICAgICAgIHZhciB0cmFuc2xhdGVWYWx1ZSA9IGVhY2hDaGlsZFNpemUgKiAoaW5kZXggKyBnZXRPZmZzZXQoKSk7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IHBvc2l0aW9uIC0gc3RhcnRpbmdTd2lwZVBvc2l0aW9uO1xuICAgICAgICBpZiAoIXByb3BzLmluZmluaXRlICYmIGluZGV4ID09PSBjaGlsZHJlbkNvdW50IC0gc2xpZGVzVG9TY3JvbGwgJiYgZGlzdGFuY2UgPCAwKSB7XG4gICAgICAgICAgLy8gaWYgaXQgaXMgdGhlIGxhc3QgYW5kIGluZmluaXRlIGlzIGZhbHNlIGFuZCB5b3UncmUgc3dpcGluZyBsZWZ0XG4gICAgICAgICAgLy8gdGhlbiBub3RoaW5nIGhhcHBlbnNcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwcm9wcy5pbmZpbml0ZSAmJiBpbmRleCA9PT0gMCAmJiBkaXN0YW5jZSA+IDApIHtcbiAgICAgICAgICAvLyBpZiBpdCBpcyB0aGUgZmlyc3QgYW5kIGluZmluaXRlIGlzIGZhbHNlIGFuZCB5b3UncmUgc3dpcGluZyByaWdodFxuICAgICAgICAgIC8vIHRoZW4gbm90aGluZyBoYXBwZW5zXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRpc3RhbmNlU3dpcGVkID0gZGlzdGFuY2U7XG4gICAgICAgIHRyYW5zbGF0ZVZhbHVlIC09IGRpc3RhbmNlU3dpcGVkO1xuICAgICAgICBpbm5lcldyYXBwZXJSZWYuY3VycmVudC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2xhdGVUeXBlICsgXCIoLVwiICsgdHJhbnNsYXRlVmFsdWUgKyBcInB4KVwiO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdmFyIG1vdmVOZXh0ID0gZnVuY3Rpb24gbW92ZU5leHQoKSB7XG4gICAgaWYgKCFwcm9wcy5pbmZpbml0ZSAmJiBpbmRleCA9PT0gY2hpbGRyZW5Db3VudCAtIHNsaWRlc1RvU2Nyb2xsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBuZXh0SW5kZXggPSBjYWxjdWxhdGVJbmRleChpbmRleCArIHNsaWRlc1RvU2Nyb2xsKTtcbiAgICB0cmFuc2l0aW9uU2xpZGUobmV4dEluZGV4KTtcbiAgfTtcbiAgdmFyIG1vdmVCYWNrID0gZnVuY3Rpb24gbW92ZUJhY2soKSB7XG4gICAgaWYgKCFwcm9wcy5pbmZpbml0ZSAmJiBpbmRleCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcHJldmlvdXNJbmRleCA9IGluZGV4IC0gc2xpZGVzVG9TY3JvbGw7XG4gICAgaWYgKHByZXZpb3VzSW5kZXggJSBzbGlkZXNUb1Njcm9sbCkge1xuICAgICAgcHJldmlvdXNJbmRleCA9IE1hdGguY2VpbChwcmV2aW91c0luZGV4IC8gc2xpZGVzVG9TY3JvbGwpICogc2xpZGVzVG9TY3JvbGw7XG4gICAgfVxuICAgIHRyYW5zaXRpb25TbGlkZShwcmV2aW91c0luZGV4KTtcbiAgfTtcbiAgdmFyIGdvVG9TbGlkZSA9IGZ1bmN0aW9uIGdvVG9TbGlkZShfcmVmKSB7XG4gICAgdmFyIGN1cnJlbnRUYXJnZXQgPSBfcmVmLmN1cnJlbnRUYXJnZXQ7XG4gICAgaWYgKCFjdXJyZW50VGFyZ2V0LmRhdGFzZXQua2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBkYXRhc2V0S2V5ID0gcGFyc2VJbnQoY3VycmVudFRhcmdldC5kYXRhc2V0LmtleSk7XG4gICAgbW92ZVRvKGRhdGFzZXRLZXkgKiBzbGlkZXNUb1Njcm9sbCk7XG4gIH07XG4gIHZhciBtb3ZlVG8gPSBmdW5jdGlvbiBtb3ZlVG8oaW5kZXgpIHtcbiAgICB0cmFuc2l0aW9uU2xpZGUoY2FsY3VsYXRlSW5kZXgoaW5kZXgpKTtcbiAgfTtcbiAgdmFyIGNhbGN1bGF0ZUluZGV4ID0gZnVuY3Rpb24gY2FsY3VsYXRlSW5kZXgobmV4dEluZGV4KSB7XG4gICAgaWYgKG5leHRJbmRleCA8IGNoaWxkcmVuQ291bnQgJiYgbmV4dEluZGV4ICsgc2xpZGVzVG9TY3JvbGwgPiBjaGlsZHJlbkNvdW50KSB7XG4gICAgICBpZiAoKGNoaWxkcmVuQ291bnQgLSBzbGlkZXNUb1Njcm9sbCkgJSBzbGlkZXNUb1Njcm9sbCkge1xuICAgICAgICByZXR1cm4gY2hpbGRyZW5Db3VudCAtIHNsaWRlc1RvU2Nyb2xsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5leHRJbmRleDtcbiAgICB9XG4gICAgcmV0dXJuIG5leHRJbmRleDtcbiAgfTtcbiAgdmFyIHN0YXJ0U2xpZGVzID0gZnVuY3Rpb24gc3RhcnRTbGlkZXMoKSB7XG4gICAgaWYgKGRyYWdnaW5nKSB7XG4gICAgICBlbmRTd2lwZSgpO1xuICAgIH0gZWxzZSBpZiAocHJvcHMucGF1c2VPbkhvdmVyICYmIHByb3BzLmF1dG9wbGF5KSB7XG4gICAgICB0aW1lb3V0LmN1cnJlbnQgPSBzZXRUaW1lb3V0KG1vdmVOZXh0LCBwcm9wcy5kdXJhdGlvbik7XG4gICAgfVxuICB9O1xuICB2YXIgbW92ZVNsaWRlcyA9IGZ1bmN0aW9uIG1vdmVTbGlkZXMoX3JlZjIpIHtcbiAgICB2YXIgZGF0YXNldCA9IF9yZWYyLmN1cnJlbnRUYXJnZXQuZGF0YXNldDtcbiAgICBpZiAoZGF0YXNldC50eXBlID09PSAnbmV4dCcpIHtcbiAgICAgIG1vdmVOZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vdmVCYWNrKCk7XG4gICAgfVxuICB9O1xuICB2YXIgcmVuZGVyUHJlY2VlZGluZ1NsaWRlcyA9IGZ1bmN0aW9uIHJlbmRlclByZWNlZWRpbmdTbGlkZXMoKSB7XG4gICAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkocHJvcHMuY2hpbGRyZW4pLnNsaWNlKC1zbGlkZXNUb1Nob3cpLm1hcChmdW5jdGlvbiAoZWFjaCwgaW5kZXgpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIFwiZGF0YS1pbmRleFwiOiBpbmRleCAtIHNsaWRlc1RvU2hvdyxcbiAgICAgICAgXCJhcmlhLXJvbGVkZXNjcmlwdGlvblwiOiBcInNsaWRlXCIsXG4gICAgICAgIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsXG4gICAgICAgIGtleTogaW5kZXggLSBzbGlkZXNUb1Nob3dcbiAgICAgIH0sIGVhY2gpO1xuICAgIH0pO1xuICB9O1xuICB2YXIgcmVuZGVyVHJhaWxpbmdTbGlkZXMgPSBmdW5jdGlvbiByZW5kZXJUcmFpbGluZ1NsaWRlcygpIHtcbiAgICBpZiAoIXByb3BzLmluZmluaXRlICYmIHNsaWRlc1RvU2hvdyA9PT0gc2xpZGVzVG9TY3JvbGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkocHJvcHMuY2hpbGRyZW4pLnNsaWNlKDAsIHNsaWRlc1RvU2hvdykubWFwKGZ1bmN0aW9uIChlYWNoLCBpbmRleCkge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgXCJkYXRhLWluZGV4XCI6IGNoaWxkcmVuQ291bnQgKyBpbmRleCxcbiAgICAgICAgXCJhcmlhLXJvbGVkZXNjcmlwdGlvblwiOiBcInNsaWRlXCIsXG4gICAgICAgIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsXG4gICAgICAgIGtleTogY2hpbGRyZW5Db3VudCArIGluZGV4XG4gICAgICB9LCBlYWNoKTtcbiAgICB9KTtcbiAgfTtcbiAgdmFyIHNldFNpemUgPSBmdW5jdGlvbiBzZXRTaXplKCkge1xuICAgIHZhciBhdHRyaWJ1dGUgPSBwcm9wcy52ZXJ0aWNhbCA/ICdjbGllbnRIZWlnaHQnIDogJ2NsaWVudFdpZHRoJztcbiAgICBpZiAocHJvcHMudmVydGljYWwpIHtcbiAgICAgIGlmIChpbm5lcldyYXBwZXJSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRXcmFwcGVyU2l6ZShpbm5lcldyYXBwZXJSZWYuY3VycmVudC5jaGlsZHJlblswXVthdHRyaWJ1dGVdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHdyYXBwZXJSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRXcmFwcGVyU2l6ZSh3cmFwcGVyUmVmLmN1cnJlbnRbYXR0cmlidXRlXSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICB2YXIgc3RhcnRTd2lwZSA9IGZ1bmN0aW9uIHN0YXJ0U3dpcGUoZXZlbnQpIHtcbiAgICBpZiAocHJvcHMuY2FuU3dpcGUpIHtcbiAgICAgIGlmICh3aW5kb3cuVG91Y2hFdmVudCAmJiBldmVudC5uYXRpdmVFdmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHtcbiAgICAgICAgc3RhcnRpbmdTd2lwZVBvc2l0aW9uID0gZXZlbnQubmF0aXZlRXZlbnQudG91Y2hlc1swXVtzd2lwZVBhZ2VBdHRyaWJ1dGVUeXBlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0aW5nU3dpcGVQb3NpdGlvbiA9IGV2ZW50Lm5hdGl2ZUV2ZW50W3N3aXBlQXR0cmlidXRlVHlwZV07XG4gICAgICB9XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dC5jdXJyZW50KTtcbiAgICAgIGRyYWdnaW5nID0gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIHZhciBlbmRTd2lwZSA9IGZ1bmN0aW9uIGVuZFN3aXBlKCkge1xuICAgIGlmIChwcm9wcy5jYW5Td2lwZSkge1xuICAgICAgZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgIGlmIChNYXRoLmFicyhkaXN0YW5jZVN3aXBlZCkgLyB3cmFwcGVyU2l6ZSA+IDAuMikge1xuICAgICAgICBpZiAoZGlzdGFuY2VTd2lwZWQgPCAwKSB7XG4gICAgICAgICAgbW92ZU5leHQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb3ZlQmFjaygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoTWF0aC5hYnMoZGlzdGFuY2VTd2lwZWQpID4gMCkge1xuICAgICAgICAgIHRyYW5zaXRpb25TbGlkZShpbmRleCwgMzAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdmFyIGFuaW1hdGUgPSBmdW5jdGlvbiBhbmltYXRlKCkge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICB0d2Vlbkdyb3VwLmN1cnJlbnQudXBkYXRlKCk7XG4gIH07XG4gIHZhciB0cmFuc2l0aW9uU2xpZGUgPSBmdW5jdGlvbiB0cmFuc2l0aW9uU2xpZGUodG9JbmRleCwgYW5pbWF0aW9uRHVyYXRpb24pIHtcbiAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gYW5pbWF0aW9uRHVyYXRpb24gfHwgcHJvcHMudHJhbnNpdGlvbkR1cmF0aW9uO1xuICAgIHZhciBjdXJyZW50SW5kZXggPSBpbmRleDtcbiAgICB2YXIgZXhpc3RpbmdUd2VlbnMgPSB0d2Vlbkdyb3VwLmN1cnJlbnQuZ2V0QWxsKCk7XG4gICAgaWYgKCF3cmFwcGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGF0dHJpYnV0ZSA9IHByb3BzLnZlcnRpY2FsID8gJ2NsaWVudEhlaWdodCcgOiAnY2xpZW50V2lkdGgnO1xuICAgIHZhciBjaGlsZFNpemUgPSB3cmFwcGVyUmVmLmN1cnJlbnRbYXR0cmlidXRlXSAvIHNsaWRlc1RvU2hvdztcbiAgICBpZiAoIWV4aXN0aW5nVHdlZW5zLmxlbmd0aCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQuY3VycmVudCk7XG4gICAgICB2YXIgdmFsdWUgPSB7XG4gICAgICAgIG1hcmdpbjogLWNoaWxkU2l6ZSAqIChjdXJyZW50SW5kZXggKyBnZXRPZmZzZXQoKSkgKyBkaXN0YW5jZVN3aXBlZFxuICAgICAgfTtcbiAgICAgIHZhciB0d2VlbiA9IG5ldyBUd2Vlbih2YWx1ZSwgdHdlZW5Hcm91cC5jdXJyZW50KS50byh7XG4gICAgICAgIG1hcmdpbjogLWNoaWxkU2l6ZSAqICh0b0luZGV4ICsgZ2V0T2Zmc2V0KCkpXG4gICAgICB9LCB0cmFuc2l0aW9uRHVyYXRpb24pLm9uVXBkYXRlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoaW5uZXJXcmFwcGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBpbm5lcldyYXBwZXJSZWYuY3VycmVudC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2xhdGVUeXBlICsgXCIoXCIgKyB2YWx1ZS5tYXJnaW4gKyBcInB4KVwiO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHR3ZWVuLmVhc2luZyhnZXRFYXNpbmcocHJvcHMuZWFzaW5nKSk7XG4gICAgICBhbmltYXRlKCk7XG4gICAgICB2YXIgbmV3SW5kZXggPSB0b0luZGV4O1xuICAgICAgaWYgKG5ld0luZGV4IDwgMCkge1xuICAgICAgICBuZXdJbmRleCA9IGNoaWxkcmVuQ291bnQgLSBzbGlkZXNUb1Njcm9sbDtcbiAgICAgIH0gZWxzZSBpZiAobmV3SW5kZXggPj0gY2hpbGRyZW5Db3VudCkge1xuICAgICAgICBuZXdJbmRleCA9IDA7XG4gICAgICB9XG4gICAgICB0d2Vlbi5vblN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wcy5vblN0YXJ0Q2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcHJvcHMub25TdGFydENoYW5nZShpbmRleCwgbmV3SW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHR3ZWVuLm9uQ29tcGxldGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBkaXN0YW5jZVN3aXBlZCA9IDA7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcHMub25DaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBwcm9wcy5vbkNoYW5nZShpbmRleCwgbmV3SW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHNldEluZGV4KG5ld0luZGV4KTtcbiAgICAgIH0pO1xuICAgICAgdHdlZW4uc3RhcnQoKTtcbiAgICB9XG4gIH07XG4gIHZhciBpc1NsaWRlQWN0aXZlID0gZnVuY3Rpb24gaXNTbGlkZUFjdGl2ZShrZXkpIHtcbiAgICByZXR1cm4ga2V5IDwgaW5kZXggKyBzbGlkZXNUb1Nob3cgJiYga2V5ID49IGluZGV4O1xuICB9O1xuICB2YXIgZ2V0T2Zmc2V0ID0gZnVuY3Rpb24gZ2V0T2Zmc2V0KCkge1xuICAgIGlmICghcHJvcHMuaW5maW5pdGUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gc2xpZGVzVG9TaG93O1xuICB9O1xuICB2YXIgc3R5bGUgPSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVUeXBlICsgXCIoLVwiICsgKGluZGV4ICsgZ2V0T2Zmc2V0KCkpICogZWFjaENoaWxkU2l6ZSArIFwicHgpXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBkaXI6IFwibHRyXCIsXG4gICAgXCJhcmlhLXJvbGVkZXNjcmlwdGlvblwiOiBcImNhcm91c2VsXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJyZWFjdC1zbGlkZXNob3ctY29udGFpbmVyXCIsXG4gICAgb25Nb3VzZUVudGVyOiBwYXVzZVNsaWRlcyxcbiAgICBvbk1vdXNlT3ZlcjogcGF1c2VTbGlkZXMsXG4gICAgb25Nb3VzZUxlYXZlOiBzdGFydFNsaWRlcyxcbiAgICBvbk1vdXNlRG93bjogc3RhcnRTd2lwZSxcbiAgICBvbk1vdXNlVXA6IGVuZFN3aXBlLFxuICAgIG9uTW91c2VNb3ZlOiBzd2lwZSxcbiAgICBvblRvdWNoU3RhcnQ6IHN0YXJ0U3dpcGUsXG4gICAgb25Ub3VjaEVuZDogZW5kU3dpcGUsXG4gICAgb25Ub3VjaENhbmNlbDogZW5kU3dpcGUsXG4gICAgb25Ub3VjaE1vdmU6IHN3aXBlXG4gIH0sIHByb3BzLmFycm93cyAmJiBzaG93UHJldmlvdXNBcnJvdyhwcm9wcywgaW5kZXgsIG1vdmVTbGlkZXMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInJlYWN0LXNsaWRlc2hvdy13cmFwcGVyIHNsaWRlIFwiICsgKHByb3BzLmNzc0NsYXNzIHx8ICcnKSxcbiAgICByZWY6IHdyYXBwZXJSZWZcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJpbWFnZXMtd3JhcCBcIiArIChwcm9wcy52ZXJ0aWNhbCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCcpLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICByZWY6IGlubmVyV3JhcHBlclJlZlxuICB9LCBwcm9wcy5pbmZpbml0ZSAmJiByZW5kZXJQcmVjZWVkaW5nU2xpZGVzKCksIChSZWFjdC5DaGlsZHJlbi5tYXAocHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uICh0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXNBcmc7XG4gIH0pIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGVhY2gsIGtleSkge1xuICAgIHZhciBpc1RoaXNTbGlkZUFjdGl2ZSA9IGlzU2xpZGVBY3RpdmUoa2V5KTtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgXCJkYXRhLWluZGV4XCI6IGtleSxcbiAgICAgIGtleToga2V5LFxuICAgICAgY2xhc3NOYW1lOiBpc1RoaXNTbGlkZUFjdGl2ZSA/ICdhY3RpdmUnIDogJycsXG4gICAgICBcImFyaWEtcm9sZWRlc2NyaXB0aW9uXCI6IFwic2xpZGVcIixcbiAgICAgIFwiYXJpYS1oaWRkZW5cIjogaXNUaGlzU2xpZGVBY3RpdmUgPyAnZmFsc2UnIDogJ3RydWUnXG4gICAgfSwgZWFjaCk7XG4gIH0pLCByZW5kZXJUcmFpbGluZ1NsaWRlcygpKSksIHByb3BzLmFycm93cyAmJiBzaG93TmV4dEFycm93KHByb3BzLCBpbmRleCwgbW92ZVNsaWRlcywgcmVzcG9uc2l2ZVNldHRpbmdzKSksICEhcHJvcHMuaW5kaWNhdG9ycyAmJiBzaG93SW5kaWNhdG9ycyhwcm9wcywgaW5kZXgsIGdvVG9TbGlkZSwgcmVzcG9uc2l2ZVNldHRpbmdzKSk7XG59KTtcblNsaWRlLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuZXhwb3J0IHsgRmFkZSwgU2xpZGUsIFpvb20gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWN0LXNsaWRlc2hvdy1pbWFnZS5lc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-slideshow-image/dist/react-slideshow-image.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/react-slideshow-image/dist/styles.css":
/*!************************************************************!*\
  !*** ./node_modules/react-slideshow-image/dist/styles.css ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"d78068798b01\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc2xpZGVzaG93LWltYWdlL2Rpc3Qvc3R5bGVzLmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0b3JlMnUvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc2xpZGVzaG93LWltYWdlL2Rpc3Qvc3R5bGVzLmNzcz9iMGUxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiZDc4MDY4Nzk4YjAxXCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-slideshow-image/dist/styles.css\n");

/***/ })

};
;